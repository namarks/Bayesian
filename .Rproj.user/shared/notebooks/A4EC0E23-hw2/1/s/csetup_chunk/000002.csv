"0","#NOTE: bookdown and tufte packages must be installed to knit this template"
"0","# install.packages('bookdown')"
"0","# install.packages('tufte')"
"0","pacman::p_load(tufte, knitr, tidyverse, lubridate, plotly, scales, "
"0","               xtable, magrittr, rstudioapi, stringr, Hmisc, eboxr) "
"0","options(scipen = 9)"
"0","# invalidate cache when the tufte version changes"
"0","knitr::opts_chunk$set(tidy = FALSE, cache.extra = packageVersion('tufte'), "
"0","                      echo=FALSE, cache = TRUE, comment = NULL,"
"0","                      dev = ""cairo_pdf"")"
"0","options(htmltools.dir.version = FALSE)"
"0","old <- theme_get()"
"0","the_new <- old %+% theme(text = element_text(family = ""HelveticaNeue-Light"","
"0","                                             size = 10),"
"0","    panel.background = element_rect(fill = ""transparent"",colour = NA),"
"0","  panel.grid.major = element_line(colour = ""grey""))"
"0","theme_set(the_new)"
"0","options(xtable.comment = FALSE)"
"0","options(xtable.booktabs = TRUE)"
"0","lpercent <- function(x) Hmisc::latexTranslate(percent(x))"
"0","ldollar <- function(x) Hmisc::latexTranslate(dollar(x))"
"0","discount_rate <- (1.12)^(3/2)-1"
"0","xtable <- function(x, ...) {"
"0","  for (i in which(sapply(x, function(y) !all(is.na(match(c(""POSIXct"",""Date""),class(y))))))) x[[i]] <- as.character(x[[i]])"
"0","  xtable::xtable(x, ...)"
"0","}"
"0","cap_all_words <- function(name) {sapply(name, function(x) {"
"0","  paste(sapply(strsplit(x, ' '), capitalize), collapse=' ')"
"0","})}"
"0","rprint <- function(tbldf,dollars=c(),xtable_args = list(), NA.string=""NA"", ...) {"
"0","  if(rstudioapi::isAvailable()) {return(print(tbldf))}"
"0","  xt <- do.call(xtable, c(list(x=tbldf), xtable_args))"
"0","  if(length(dollars)>0) colnames(xt)[dollars] <- paste(colnames(xt)[dollars],""($)"")"
"0","  colnames(xt) <- cap_all_words(str_replace_all(colnames(xt),'_',' '))"
"0","  print(xt,include.rownames=FALSE,NA.string=NA.string,"
"0","      type='latex',"
"0","      format.args=list(big.mark="",""), ...)"
"0","  invisible()"
"0","}"
